## I-017 — Person–Address Lifecycle Coupling (Cascading Delete Semantics)

**Statement**

The lifecycle of an `Address` entity MUST be coupled to the lifecycle of its owning `Person` as follows:

---

### 1. Address Dependency on Person Lifecycle

* An `Address` MUST NOT outlive its owning `Person`.
* An `Address` exists **only while** its owning `Person` exists.

---

### 2. Cascading Delete Requirement

* Deleting a `Person` MUST delete all `Address` entities owned by that `Person`.
* This deletion MUST be **automatic and complete**.
* No owned `Address` MAY remain after the owning `Person` is deleted.

---

### 3. Post-Deletion Invalidity

* After a `Person` is deleted:

  * All previously owned `Address` entities MUST be treated as nonexistent.
  * Read, update, or delete operations on those `Address` entities MUST fail.

---

### 4. Atomicity of Lifecycle Transition

* Deleting a `Person` and deleting all owned `Address` entities MUST be treated as a **single logical lifecycle transition**.
* The system MUST NOT expose any intermediate state in which:

  * the `Person` is deleted but owned `Address` entities still exist, or
  * owned `Address` entities are deleted while the `Person` still exists.

---

### 5. Scope of This Invariant

* This invariant defines **lifecycle coupling**, not implementation.
* It does **not** prescribe:

  * how cascading is implemented
  * transaction or concurrency mechanisms
  * persistence technology
  * ordering of physical deletions

Those concerns may be addressed by later invariants or implementation choices.

---

**Rationale**

This invariant defines **temporal ownership semantics** between `Person` and `Address`.

It ensures that:

* ownership is not merely referential but lifecycle-binding
* deleting a `Person` has well-defined, irreversible consequences
* dangling or orphaned addresses are impossible
* lifecycle reasoning across aggregates remains sound

Without this invariant:

* addresses may outlive their owners
* delete semantics become ambiguous
* referential integrity degrades over time
* audit and lifecycle models become inconsistent

This invariant completes the **cross-entity lifecycle model** for the address book domain.
