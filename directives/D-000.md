## D-000 â€” Fake Persistence as Scaffolding

### Purpose

To enable early discovery and enforcement of **domain invariants and lifecycle semantics** before introducing real persistence infrastructure.

This directive explicitly authorizes the use of **Fake (in-memory) storage implementations** as temporary scaffolding.

---

### Directive

1. **Fake storages MAY be used as provisional persistence mechanisms**

   * Fake stores exist solely to:

     * execute invariant tests
     * make operations runnable
     * surface missing semantics early
   * Fake storages are **not production code**.

2. **Fake storages MUST be explicit and obvious**

   * Class names MUST include `Fake` (e.g. `FakePersonStore`, `FakeAddressStore`).
   * Fake code MUST NOT masquerade as final architecture.
   * No abstraction layers may hide fakeness.

3. **Fake storages MUST enforce invariants, not weaken them**

   * All invariant tests MUST pass against Fake implementations.
   * Fake stores MUST fail when invariants are violated.
   * Fake behavior MUST be stricter rather than looser if ambiguity exists.

4. **Fake storages MUST be replaceable without changing invariants**

   * Invariant statements and assertions MUST remain stable.
   * When real persistence is introduced:

     * tests MAY change wiring
     * tests MUST NOT change meaning
   * If tests must be weakened, a missing invariant has been discovered.

5. **Fake storages MUST be disposable**

   * Fake implementations are expected to be deleted once:

     * real persistence satisfies all invariants
   * No Fake-specific behavior may leak into domain logic.

---

### Non-Goals

* Fake storages are NOT:

  * architectural decisions
  * persistence models
  * abstractions to preserve
* Fake storages do NOT attempt to predict SQL schemas, ORMs, or performance.

---

### Rationale

Fake persistence allows the system to:

* discover invariants before infrastructure hardens them
* avoid premature schema decisions
* keep authority in tests, not implementations
* evolve semantics without migration cost

Fake is **scaffolding**, not simulation.

The system is correct when **invariants pass**, regardless of storage backend.

### Note

This directive is written after the fact, as a reference that we already have implemented to temporary storages. In the future we should write the directive before the storage is implemented.